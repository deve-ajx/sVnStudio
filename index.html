<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EmAji Phones Store</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
<style>
/* --- Keep your existing CSS here --- */
/* No changes to your styles except the OWNER PANEL FIXES if needed */
#ownerPosts { overflow-x: hidden; }
#publicPosts, #adminPosts { display: flex; flex-wrap: wrap; gap: 20px; }
#publicPosts .card, #adminPosts .card { flex: 1 1 300px; max-width: 100%; box-sizing: border-box; }
#adminPanel input, #adminPanel textarea, #adminPanel button { width: 100%; box-sizing: border-box; }
#adminPanel img, #publicPosts img { max-width: 100%; height: auto; border-radius: 10px; }
img { -webkit-user-drag: none; -webkit-touch-callout: none; user-select: none; }
.fixed-top-bar { position:fixed; top:0; left:0; width:100%; height:65px; background:rgba(0,0,0,0.55); backdrop-filter:blur(14px); display:flex; align-items:center; justify-content:space-between; padding:0 16px; z-index:9999; border-bottom:1px solid rgba(255,255,255,0.15); }
body { padding-top:65px; }
</style>
</head>
<body>

<div class="fixed-top-bar">
  <div class="logo"><img src="https://files.catbox.moe/z18y6s.png"></div>
  <div class="hamburger" id="hamburger"><div></div><div></div><div></div></div>
</div>

<header>
  <div class="nav-menu" id="navMenu">
    <a href="#about">About</a>
    <a href="#reminder">Daily Reminder</a>
    <a href="#products">Products</a>
    <a href="#ceo">CEO</a>
    <a href="#" onclick="toggleMode()">Dark / Light</a>
  </div>
  <div class="header-content">
    <h1>EmAji <span>Phones Store</span></h1>
    <p>100% Original iPhones | Trusted in Maiduguri | Nationwide Delivery</p>
    <button class="glass-btn" onclick="document.getElementById('products').scrollIntoView()">View Phones</button>
    <button class="glass-btn" onclick="openUpdate()">watch</button>
  </div>
</header>

<!-- ... your other sections like reminder, products, CEO remain unchanged ... -->

<!-- OWNER PANEL SECTION -->
<section class="container" id="ownerPosts">
<h2>Low Price iPhones</h2>
<div id="publicPosts"></div>

<div id="adminPanel" style="display:none;margin-top:20px;">
<h3>Owner Panel</h3>
<input type="file" id="postImage" accept="image/*">
<textarea id="postContent" placeholder="Write update..." style="height:100px;"></textarea>
<button class="glass-btn" onclick="addPost()">Post Update</button>
<div id="adminPosts" style="margin-top:20px;"></div>
</div>
<button class="glass-btn" onclick="showAdmin()">Admin Login</button>
</section>

<footer>
Â© 2026 EmAji Phones Store. All Rights Reserved.
</footer>

<script>
// Hamburger
const hamburger=document.getElementById('hamburger');
const navMenu=document.getElementById('navMenu');
hamburger.onclick=()=>{navMenu.style.display=navMenu.style.display==='flex'?'none':'flex';};

// Dark/Light
function toggleMode(){document.body.classList.toggle('light'); localStorage.setItem('mode',document.body.classList.contains('light')?'light':'dark');}
if(localStorage.getItem('mode')==='light'){document.body.classList.add('light');}

// OWNER PANEL SCRIPT (Cloudinary + backend)
const SECRET = "mymagickey"; // same as before

function showAdmin(){
  const key = prompt("Enter Admin Key:");
  if(key === SECRET){
    document.getElementById('adminPanel').style.display='block';
    loadPosts();
  } else { alert("Wrong key!"); }
}

// Fetch all posts from server
async function loadPosts(){
  const res = await fetch('http://localhost:3000/posts');
  const posts = await res.json();
  const publicDiv = document.getElementById('publicPosts');
  const adminDiv = document.getElementById('adminPosts');
  publicDiv.innerHTML = "";
  adminDiv.innerHTML = "";

  posts.reverse().forEach(post => {
    // public view
    let pubCard = document.createElement('div');
    pubCard.className = "card";
    pubCard.innerHTML = `
      ${post.imageUrl ? `<img src="${post.imageUrl}">` : ''}
      ${post.text ? `<p>${post.text}</p>` : ''}
    `;
    publicDiv.appendChild(pubCard);

    // admin view with delete
    if(document.getElementById('adminPanel').style.display==='block'){
      let adminCard = document.createElement('div');
      adminCard.className = "card";
      adminCard.innerHTML = `
        ${post.imageUrl ? `<img src="${post.imageUrl}">` : ''}
        ${post.text ? `<p>${post.text}</p>` : ''}
        <button class="glass-btn" onclick="deletePost('${post.id}')">Delete</button>
      `;
      adminDiv.appendChild(adminCard);
    }
  });
}

// Add post via backend (image + text)
async function addPost(){
  const text = document.getElementById('postContent').value;
  const imgInput = document.getElementById('postImage');

  if(!text && !imgInput.files[0]) return alert("Add text or image");

  const formData = new FormData();
  formData.append('text', text);
  if(imgInput.files[0]) formData.append('image', imgInput.files[0]);

  const res = await fetch('http://localhost:3000/post', {
    method:'POST',
    body: formData
  });
  if(res.ok){
    document.getElementById('postContent').value='';
    document.getElementById('postImage').value='';
    loadPosts();
  } else {
    alert('Failed to post. Check server.');
  }
}

// Delete post via backend
async function deletePost(id){
  const confirmDel = confirm("Are you sure you want to delete this post?");
  if(!confirmDel) return;

  const res = await fetch(`http://localhost:3000/post/${id}`, { method:'DELETE' });
  if(res.ok) loadPosts();
}

// Load posts on page load
loadPosts();
</script>

</body>
</html>